<div class="row-fluid">
    <div class="col-md-4 col-lg-4">
        <div class="row-fluid">
            <div class="col-xs-12 col-s-m12 col-md-12 col-lg-12">
                <h2 class="transparent visible-md visible-lg">étape 1: type de message</h2>
                <h2 class="menu-text-transparent">{{menus[$state.params["type"]]['right_menu_text']}} {{}}</h2>
                <h2> <strong>étape 2: les destinataires</strong></h2>
                <p class="menu-text"> Sélectionner les classes  et les groupes destinataire des messages</p>
                <form role="form" class="form-inline">
                    <div ng-show="$state.params['type']=='ecrire_profs'">
                        <label>Choisir une matiere: </label><select class="form-control">
                            <option>Matimatique</option>
                            <option>Autre chose</option>
                        </select>
                    </div>
                    <br/>
                    <!-- 
                    <label><p class="menu-text-black">filtrer les classes et groupes: <i class="fa fa-search"></i></label> <input type="text" ng-model="searchText" class="form-control" placeholder="chercher"/> -->
                    <div  ng-show="$state.params['type']=='ecrire_tous'">
                        <label>Choisir des profils: </label><br/>
                        <label ng-repeat="profil in profils">
                            <input type="checkbox" checklist-model="selectedProfils" checklist-value="profil"> {{profil}} </input>
                            <br/>
                        </label>
                        <!--
                        <div style="text-align: center" class="checkbox">
                            <label>
                              <input type="checkbox" value="eleves" ng-model="byEleves" ng-click="log(value)"> Elèves
                            </label>
                        </div><br/>
                        <div style="text-align: center" class="checkbox">
                            <label>
                              <input type="checkbox" value="profs" ng-model='byProfs' ng-click="log(value)"> Professeurs
                            </label>
                        </div><br/>
                        <div style="text-align: center" class="checkbox">
                            <label>
                              <input type="checkbox" value="parents" ng-model="byParents"> Parents
                            </label>
                        </div><br/>
                        <div class="checkbox">
                            <label>
                              <input type="checkbox" value="personnels" ng-model="byPersonnels"> Personnels
                            </label>
                        </div><br/>
                        -->
                        <!-- <a class="btn btn-default btn-mini" ng-click="checkAll()">tous selectionner</a>
                        <a class="btn btn-default btn-mini" ng-click="uncheckAll()">annuler la selection</a> -->
                    </div>
                </form>
                <p class="menu-text-hidden"><strong> {{menus[$state.params["type"]]['recpitualif']}} <span ng-repeat= "classe in regroupements['classes']"><span ng-show="classe.checked">{{classe.classe_libelle}} </span></span><span ng-repeat= "groupe in regroupements['groupes_eleves']"> <span ng-show="groupe.checked">{{groupe.groupe_libelle}}</span></span></p>

                </br>
                </br>
                <p style="text-align:center;"><a class='btn btn-sm'  style="color:#1aa1cc;border-color:#1aa1cc;background-color:white;" ng-disabled="destinations.length==0" ng-click="addDestinations();Redirect.goToMessage($state.params['type'])">suivant</a></p>
                </br>
                </br>
                <a class="btn btn-info btn-sm visible-md visible-lg">voir l'historique</a>
            </div>
        </div>
    </div>
    <div class="col-md-8 col-lg-8">
        <div class="row-fluid">
            <div  ng-show="$state.params['type']!='ecrire_personnels'">
                <div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 gris3" >
                    <a ng-click="selectAll()" ng-show="selectAllMode">
                        <div class="square-icon">
                          <div class="famille-icon"><!--<data-ng-include class="svg" src="menus[$state.params['type']].icon"></data-ng-include>--></div>
                          <span class="square-text">tous sélectionner</span>
                        </div>
                    </a>
                    <a ng-click="deselectAll()" ng-hide="selectAllMode">
                        <div class="square-icon">
                          <div class="famille-icon"><!--<data-ng-include class="svg" src="menus[$state.params['type']].icon"></data-ng-include>--></div>
                          <span class="square-text">annuler</span>
                        </div>
                    </a>
                </div>
            </div>

            <!--show classes only when message type is not  ecrire personnels ou ecrire tous -->
            <div  ng-show="$state.params['type']!='ecrire_personnels'">
                <div ng-repeat="classe in regroupements['classes'] | filter:searchText" class="col-xs-6 col-sm-6 col-md-3 col-lg-3" ng-class="classe.color">
                    <a ng-click="changeClassColor($index);classe.checked=!classe.checked;addRemoveDestination(classe);">
                      <div class="square-icon">
                        <div class="empty-icon"><!--<data-ng-include class="svg" src="square.icone"></data-ng-include>-->
                            <span class="classe-text">{{classe.classe_libelle}}</span>
                        </div>
                        <span class="square-text">{{classe.etablissement_nom}}</span>
                      </div>
                    </a>
                </div>
            </div>

            <!--show personnels only when message type is ecrire personnels -->
            <div  ng-show="$state.params['type']=='ecrire_personnels'">
                <div ng-repeat="person in personnels" class="col-xs-6 col-sm-6 col-md-3 col-lg-3">
                    <a ng-click="changePersonColor($index);person.checked=!person.checked;addRemoveDestination(person)">
                        <div class="square-icon">
                            <div>
                                {{person.prenom}} {{person.nom}}
                            </div>
                            <span class="squaire-text">{{person.description}}</span>
                            <br/>
                            <span class="glyphicon-class" ng-show="person.checked"><i class="fa fa-check-square-o fa-lg"></i></span>
                        </div>       
                    </a>
                </div>
            </div>

            <!--show groupes only when message type in not ecrire personnels ou ecrire tous -->
            <div  ng-show="$state.params['type']!='ecrire_personnels'">
                <div ng-repeat="groupe in regroupements['groupes_eleves']" class="col-xs-6 col-sm-6 col-md-3 col-lg-3" ng-class="groupe.color">
                    <a ng-click="changeGroupColor($index);groupe.checked=!groupe.checked;addRemoveDestination(groupe)">
                      <div class="square-icon">
                        <div class="empty-icon"> <!--<data-ng-include class="svg" src="square.icone"></data-ng-include>-->
                            <span class="groupe-text">{{groupe.groupe_libelle}}</span>
                        </div>
                        <span class="square-text">{{groupe.etablissement_nom}}</span>
                      </div>
                    </a>
                </div>
            </div>
            
            <!-- empty squares -->
            <div ng-repeat="emptysquare in empty_squares track by $index" class="col-xs-6 col-sm-6 col-md-3 col-lg-3 {{emptysquare.color}}">
                <a>
                  <div class="square-icon">
                    <div class="empty-icon">
                        <span class="classe-text">&nbsp;</span>
                    </div>
                    <span class="square-text">&nbsp;</span>
                  </div>
                </a>
            </div> 
        </div>
    </div>
</div>